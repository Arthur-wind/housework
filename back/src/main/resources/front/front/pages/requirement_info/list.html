<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="utf-8">
	<title>需求信息</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="../../layui/css/layui.css">
	<link rel="stylesheet" href="../../xznstatic/css/common.css"/>
	<link rel="stylesheet" href="../../xznstatic/css/style.css"/>
	<script type="text/javascript" src="../../xznstatic/js/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="../../xznstatic/js/jquery.SuperSlide.2.1.1.js"></script>
</head>
<style>

	html::after {
		position: fixed;
		top: 0;
		right: 0;
		left: 0;
		bottom: 0;
		content: '';
		display: block;
		background-attachment: fixed;
		background-size: cover;
		background-position: center;
		background-image: url('your-background-image.jpg'); /* 可选：替换为你自己的背景图 */
	}

	/* 列表样式 */
	.recommend {
		padding: 10px 0;
		display: flex;
		justify-content: center;
		background-color: #fff;
	}

	.recommend .box {
		width: 1100px;
		margin: 0 auto;
	}

	.recommend .box .title {
		padding: 10px 0;
		display: flex;
		justify-content: center;
		align-items: center;
		box-sizing: border-box;
		background-color: rgba(255, 255, 255, 1);
		border-radius: 4px;
		height: 54px;
	}

	.recommend .box .title span {
		padding: 0 10px;
		font-size: 18px;
		color: #333;
		border-radius: 0 0 2px 0;
		font-weight: bold;
	}

	.recommend .box .filter {
		padding: 0 10px;
		display: flex;
		align-items: center;
		box-sizing: border-box;
		width: 100%;
		flex-wrap: wrap;
		background-color: rgba(125, 159, 199, 1);
		border-radius: 4px;
		height: 60px;
		justify-content: flex-end;
	}

	.recommend .box .filter .item-list {
		display: flex;
		align-items: center;
		margin: 0 10px;
	}

	.recommend .box .filter .item-list .lable {
		font-size: 16px;
		color: #fff;
		margin-right: 10px;
		white-space: nowrap;
	}

	.recommend .box .filter .item-list input,
	.recommend .box .filter .item-list select {
		padding: 0 10px;
		box-sizing: border-box;
		outline: none;
		border: 2px solid #ccc;
		border-radius: 8px;
		background-color: #fff;
		color: #333;
		text-align: center;
		width: 140px;
		height: 44px;
		font-size: 14px;
	}

	.recommend .box .filter button {
		display: flex;
		align-items: center;
		justify-content: center;
		outline: none;
		border: none;
		border-radius: 4px;
		background-color: rgba(72, 72, 72, 1);
		color: #fff;
		height: 40px;
		margin-left: 10px;
	}

	.recommend .box .filter button i {
		margin-right: 4px;
	}

	/* 卡片列表 */
	.recommend .box .list {
		display: flex;
		flex-wrap: wrap;
		position: relative;
	}

	.recommend .box .list .list-item {
		flex: 0 0 25%;
		padding: 0 5px;
		box-sizing: border-box;
		margin-bottom: 20px;
	}

	.recommend .box .list .list-item .list-item-body {
		cursor: pointer;
		border: 2px solid rgba(0, 0, 0, 1);
		padding: 5px;
		box-sizing: border-box;
		background-color: #fff;
		border-radius: 30px;
		height: 100%;
	}

	.recommend .box .list .list-item .list-item-body img {
		width: 200px;
		height: 180px;
		display: block;
		margin: 0 auto;
		border-radius: 0 0 20px 20px;
	}

	.recommend .box .list .list-item .list-item-body .info {
		display: flex;
		flex-wrap: wrap;
	}

	.recommend .box .list .list-item .list-item-body .info .price {
		padding-top: 10px;
		color: red;
		font-size: 16px;
		text-align: center;
		width: 100%;
	}

	.recommend .box .list .list-item .list-item-body .info .name {
		padding-top: 10px;
		color: #666;
		font-size: 14px;
		text-align: center;
		width: 100%;
	}

	.index-pv1 .animation-box:hover {
		transform: perspective(1000px) translate3d(0px, 0px, 0px) scale(1) rotate(0deg) skew(0deg, 0deg);
		transition: all 0.3s;
	}

	.index-pv1 .animation-box img:hover {
		transform: perspective(1000px) translate3d(0px, 0px, 0px) scale(1) rotate(0deg) skew(0deg, 0deg);
		transition: all 0.3s;
	}
</style>

<body>
<div id="app">
	<div class="recommend index-pv1" :style='{"padding":"10px 0","boxShadow":"0 0 0px rgba(255,0,0,.8)","margin":"0","borderColor":"rgba(0,0,0,.3)","borderRadius":"0","borderWidth":"0","background":"#fff","borderStyle":"solid"}'>
		<div class="box" style="width: 1100px;">
			<!-- 标题 -->
			<div class="title" :style='{"padding":"10px 0","boxShadow":"0 0 0px rgba(255,0,0,.8)","margin":"10px 0","borderColor":"rgba(125, 159, 199, 1)","backgroundColor":"rgba(255, 255, 255, 1)","borderRadius":"4px","height":"54px"}'>
				<span :style='{"padding":"0 10px","boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"rgba(255,0,0,1)","backgroundColor":"rgba(0,0,0,0)","color":"#333","borderRadius":"0 0 2px 0","fontSize":"18px"}'>需求信息</span>
			</div>

			<!-- 筛选栏 -->
			<form class="layui-form filter" :style='{"padding":"0 10px","boxShadow":"0 0 0px rgba(255,0,0,.8)","margin":"10px 0","borderColor":"rgba(0,0,0,.3)","backgroundColor":"rgba(125, 159, 199, 1)","borderRadius":"4px","alignItems":"center","borderWidth":"0","justifyContent":"flex-end","height":"60px"}'>
				<div class="item-list">
					<div class="lable" :style='{"padding":"0 10px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,0)","backgroundColor":"transparent","color":"#fff","borderRadius":"0","textAlign":"right","fontSize":"16px"}'>标题</div>
					<input type="text" :style='{"boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"#ccc","backgroundColor":"#fff","color":"#333","borderRadius":"8px","textAlign":"center","borderWidth":"2px","width":"140px","fontSize":"14px","height":"44px"}' name="title" id="title" placeholder="标题" autocomplete="off" class="layui-input">
				</div>
				<div class="item-list">
					<div class="lable" :style='{"padding":"0 10px","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0","borderColor":"rgba(0,0,0,0)","backgroundColor":"transparent","color":"#fff","borderRadius":"0","textAlign":"right","fontSize":"16px"}'>工作地点</div>
					<input type="text" :style='{"boxShadow":"0 0 6px rgba(255,0,0,0)","borderColor":"#ccc","backgroundColor":"#fff","color":"#333","borderRadius":"8px","textAlign":"center","borderWidth":"2px","width":"140px","fontSize":"14px","height":"44px"}' name="work_location" id="work_location" placeholder="工作地点" autocomplete="off" class="layui-input">
				</div>
				<button id="btn-search" type="button" class="layui-btn layui-btn-normal" :style='{"padding":"0 15px","boxShadow":"0 0 8px rgba(0,0,0,0)","margin":"0 0 0 10px","borderColor":"#409EFF","backgroundColor":"rgba(72, 72, 72, 1)","color":"#fff","borderRadius":"4px","borderWidth":"0","width":"auto","fontSize":"14px","height":"40px"}'>
					<i class="layui-icon layui-icon-search"></i>搜索
				</button>
				<button v-if="isAuth('requirement_info','新增')" @click="jump('../requirement_info/add.html')" type="button" class="layui-btn btn-theme" :style='{"padding":"0 15px","boxShadow":"0 0 8px rgba(0,0,0,0)","margin":"0 0 0 10px","borderColor":"#409EFF","backgroundColor":"rgba(72, 72, 72, 1)","color":"#fff","borderRadius":"4px","borderWidth":"0","width":"auto","fontSize":"14px","height":"40px"}'>
					<i class="layui-icon">&#xe654;</i>添加
				</button>
			</form>

			<!-- 内容卡片列表 -->
			<div class="list" style="position: relative;">

				<!-- 左侧分类筛选栏 -->
				<div v-if="1 == 1" style="position: absolute;left: 0;top: 0;transform: translate3d(-100%, 0, 0);" :style='{"padding":"0","boxShadow":"0 0 6px rgba(255,0,0,0)","margin":"0 0 0 -50px","borderColor":"rgba(0,0,0,1)","backgroundColor":"rgba(0,0,0,0)","borderRadius":"0","width":"84px"}'>
					<div style="text-align: center;cursor: pointer;" class="category-search" :index="-1" :style='swiperIndex==-1?{"padding":"0 10px","boxShadow":"0 0 6px rgba(0,0,0,.3)","margin":"4px 0","borderColor":"rgba(0,0,0,1)","backgroundColor":"rgba(125, 159, 199, 1)","color":"#fff","borderRadius":"4px","width":"100%","lineHeight":"34px","fontSize":"14px"}:{"padding":"0 10px","boxShadow":"0 0 6px rgba(0,0,0,.3)","margin":"4px 0","borderColor":"rgba(0,0,0,1)","backgroundColor":"#fff","color":"#333","borderRadius":"4px","width":"100%","lineHeight":"34px","fontSize":"14px"}'>全部</div>
					<div v-for="(item,index) in categoryList" :key="index">
						<div style="text-align: center;cursor: pointer;" :style='swiperIndex==index?{"padding":"0 10px","boxShadow":"0 0 6px rgba(0,0,0,.3)","margin":"4px 0","borderColor":"rgba(0,0,0,1)","backgroundColor":"rgba(125, 159, 199, 1)","color":"#fff","borderRadius":"4px","width":"100%","lineHeight":"34px","fontSize":"14px"}:{"padding":"0 10px","boxShadow":"0 0 6px rgba(0,0,0,.3)","margin":"4px 0","borderColor":"rgba(0,0,0,1)","backgroundColor":"#fff","color":"#333","borderRadius":"4px","width":"100%","lineHeight":"34px","fontSize":"14px"}' :index="index" class="category-search">{{ item }}</div>
					</div>
				</div>

				<!-- 卡片列表 -->
				<template v-for="(item, index) in dataList" :key="index">
					<div @click="jump('../requirement_info/detail.html?id='+item.id)" class="list-item">
						<div class="list-item-body animation-box" :style='{"padding":"0 10px 10px","boxShadow":"0 0 0px rgba(255,0,0,.8)","margin":"10px 5px","borderColor":"rgba(0, 0, 0, 1)","backgroundColor":"#fff","borderRadius":"30px","borderWidth":"2px","borderStyle":"solid"}'>
							<img :src="item.cover_image ? baseurl + item.cover_image.split(',')[0] : ''" :style='{"boxShadow":"0 0 0px rgba(255,0,0,.8)","borderColor":"rgba(0,0,0,.3)","borderRadius":"0 0 20px 20px","borderWidth":"0","width":"200px","height":"180px"}'>
							<div class="info">
								<div v-if="item.price" class="price" :style='{"padding":"10px 0","margin":"10px 0 0 0","backgroundColor":"rgba(0,0,0,0)","color":"red","textAlign":"center","width":"100%","fontSize":"16px"}'>
									<span :style='{"fontSize":"12px"}'>￥</span>{{ Number(item.price).toFixed(2) }}
								</div>
								<div v-if="item.vipprice && item.vipprice > 0" class="price" :style='{"padding":"10px 0","margin":"10px 0 0 0","backgroundColor":"rgba(0,0,0,0)","color":"red","textAlign":"center","width":"100%","fontSize":"16px"}'>
									<span :style='{"fontSize":"12px"}'>￥</span>{{ Number(item.vipprice).toFixed(2) }} <span :style='{"fontSize":"12px"}'>会员价</span>
								</div>
								<div v-if="item.jf" class="price" :style='{"padding":"10px 0","margin":"10px 0 0 0","backgroundColor":"rgba(0,0,0,0)","color":"red","textAlign":"center","width":"100%","fontSize":"16px"}'>
									{{ Number(item.jf).toFixed(0) }}积分
								</div>
								<div class="name" :style='{"padding":"0","margin":"10px 0","backgroundColor":"rgba(0,0,0,0)","color":"#666","textAlign":"center","width":"100%","fontSize":"14px"}'>
									{{ item.title }}
								</div>
							</div>
						</div>
					</div>
				</template>

				<!-- 补齐空位 -->
				<template v-if="dataList.length < 8">
					<div v-for="index in (8 - dataList.length)" :key="'empty-'+index" class="list-item">
						<div class="list-item-body animation-box" :style='{"padding":"0 10px 10px","boxShadow":"0 0 0px rgba(255,0,0,.8)","margin":"10px 5px","borderColor":"rgba(0, 0, 0, 1)","backgroundColor":"#fff","borderRadius":"30px","borderWidth":"2px","borderStyle":"solid"}'>
							<div :style='{"boxShadow":"0 0 0px rgba(255,0,0,.8)","borderColor":"rgba(0,0,0,.3)","borderRadius":"0 0 20px 20px","borderWidth":"0","width":"200px","height":"180px","backgroundColor":"#f5f5f5"}'>
								<div style="height:100%;display:flex;align-items:center;justify-content:center;color:#999;">暂无数据</div>
							</div>
							<div class="info">
								<div class="price" :style='{"padding":"10px 0","margin":"10px 0 0 0","backgroundColor":"rgba(0,0,0,0)","color":"#999","textAlign":"center","width":"100%","fontSize":"16px"}'>--</div>
								<div class="name" :style='{"padding":"0","margin":"10px 0","backgroundColor":"rgba(0,0,0,0)","color":"#999","textAlign":"center","width":"100%","fontSize":"14px"}'>暂无数据</div>
							</div>
						</div>
					</div>
				</template>
			</div>

			<!-- 分页 -->
			<div class="pager" id="pager" :style="{textAlign:2==1?'left':2==2?'center':'right'}"></div>
		</div>
	</div>
</div>


<script src="../../layui/layui.js"></script>
<script src="../../js/vue.js"></script>
<script src="../../js/config.js"></script>
<script src="../../modules/config.js"></script>
<script src="../../js/utils.js"></script>

<script type="text/javascript">
	var vue = new Vue({
		el: '#app',
		data: {
			swiperList: [],
			categoryList: [],
			project_typeOptions: [],
			dataList: [],
			baseurl:'',
			swiperIndex: '-1'
		},
		filters: {
			newsDesc: function(val) {
				if (val) {
					if (val.length > 60) {
						return val.substring(0, 60).replace(/<[^>]*>/g).replace(/undefined/g, '');
					} else {
						return val.replace(/<[^>]*>/g).replace(/undefined/g, '');
					}
				}
				return '';
			}
		},
		methods: {
			isAuth(tablename, button) {
				return isFrontAuth(tablename, button)
			},
			jump(url) {
				jump(url)
			}
		}
	});

	layui.use(['layer', 'element', 'carousel', 'laypage', 'http', 'jquery','laydate'], function() {
		var layer = layui.layer;
		var element = layui.element;
		var carousel = layui.carousel;
		var laypage = layui.laypage;
		var http = layui.http;
		var jquery = layui.jquery;
		var laydate = layui.laydate;

		var limit = 8; // Show 8 items (2 rows of 4 columns)
		vue.baseurl = http.baseurl;

		// 获取轮播图 数据
		http.request('config/list', 'get', {
			page: 1,
			limit: 5
		}, function(res) {
			if (res.data.list.length > 0) {
				let swiperList = [];
				res.data.list.forEach(element => {
					if (element.value != null) {
						swiperList.push({
							img: http.baseurl+element.value
						});
					}
				});
				vue.swiperList = swiperList;

				vue.$nextTick(() => {
					carousel.render({
						elem: '#test1',
						width: '100%',
						height: '400px',
						arrow: 'hover',
						anim: 'default',
						autoplay: 'true',
						interval: '3000',
						indicator: 'inside'
					});
				})
			}
		});

		http.request(`option/project_type/project_type`,'get',{},(res)=>{
			vue.project_typeOptions = res.data
		});

		//类型查询
		categoryList();
		//类型搜索
		$(document).on("click", ".category-search", function(e){
			vue.swiperIndex = $(this).attr('index')
			pageList(e.target.innerText);
		});

		function categoryList() {
			// 获取列表数据
			http.request('option/project_type/project_type', 'get', {}, function(res) {
				vue.categoryList = res.data
			})
		}

		var vCategory = '';
		// 分页列表
		pageList();

		// 搜索按钮
		jquery('#btn-search').click(function(e) {
			pageList();
		});

		function pageList(category) {
			var param = {
				page: 1,
				limit: limit
			}
			if(category!=null && category!='全部') {
				vCategory = category;
				if (jquery('#title').val()) {
					param['title'] = '';
				}
				if (jquery('#work_location').val()) {
					param['work_location'] = '';
				}
			}
			if(vCategory!='' && category!='全部') {
				param['project_type'] = category;
			}

			if (jquery('#title').val()) {
				param['title'] = jquery('#title').val() ? '%' + jquery('#title').val() + '%' : '';
			}
			if (jquery('#work_location').val()) {
				param['work_location'] = jquery('#work_location').val() ? '%' + jquery('#work_location').val() + '%' : '';
			}

			// 获取列表数据
			http.request('requirement_info/list', 'get', param, function(res) {
				vue.dataList = res.data.list
				// 分页
				laypage.render({
					elem: 'pager',
					count: res.data.total,
					limit: limit,
					groups: 5,
					layout: ["prev","page","next"],
					theme: '#7D9FC7',
					jump: function(obj, first) {
						param.page = obj.curr;
						//首次不执行
						if (!first) {
							http.request('requirement_info/list', 'get', param, function(res) {
								vue.dataList = res.data.list
							})
						}
					}
				});
			})
		}
	});

	window.xznSlide = function() {
		jQuery(".banner").slide({mainCell:".bd ul",autoPlay:true,interTime:5000});
		jQuery("#ifocus").slide({ titCell:"#ifocus_btn li", mainCell:"#ifocus_piclist ul",effect:"leftLoop", delayTime:200, autoPlay:true,triggerTime:0});
		jQuery("#ifocus").slide({ titCell:"#ifocus_btn li", mainCell:"#ifocus_tx ul",delayTime:0, autoPlay:true});
		jQuery(".product_list").slide({mainCell:".bd ul",autoPage:true,effect:"leftLoop",autoPlay:true,vis:5,trigger:"click",interTime:4000});
	};
</script>
</body>
</html>